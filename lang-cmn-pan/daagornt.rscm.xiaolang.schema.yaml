# Rime schema
# encoding: utf-8

schema:
  name: '大狗小浪双拼'
  schema_id: daagornt.rscm.xiaolang
  author:
    - '键盘布局 小浪'
    - '方案集成 丢狼'
  description: |
    小浪双拼输入方案
  version: '2.25.285.1904'
  icon: daagornt.icon.imecn.ico
  ascii_icon: daagornt.icon.ascii.ico

switches:
  __include: daagornt.lib.shared.yaml:/zh_cn_simp/switches

engine:
  __include: daagornt.lib.shared.yaml:/engines

speller:
  alphabet: qwertyuiopasdfghjklzxcvbnm7890-
  initials: qwertyuiopasdfghjklzxcvbnm
  finals: '7890-'
  delimiter: " ';"
  auto_select: false
  use_space: false
  algebra:
    __patch:
      - daagornt.lib.dict-cmn-pan.yaml:/algebra/normalizer
      - daagornt.lib.dict-cmn-pan.yaml:/algebra/encoder
      - /rule_convert/layout

translator:
  __patch:
    - daagornt.lib.shared.yaml:/translator
    - daagornt.lib.dict-cmn-pan.yaml:/translator
  prism: daagornt.xiaolang
  preedit_format:
    __patch:
      - /rule_convert/preedit

history:
  __include: daagornt.lib.shared.yaml:/history

custom_phrase:
  __include: daagornt.lib.shared.yaml:/custom_phrase

ascii_char:
  __include: daagornt.lib.shared.yaml:/ascii_char

ascii_phrase:
  __include: daagornt.lib.shared.yaml:/ascii_phrase

quick_phrase:
  __include: daagornt.lib.shared.yaml:/quick_phrase

extchar:
  __include: daagornt.lib.shared.yaml:/extchar?

grammar:
  __include: daagornt.lib.dict-cmn-pan.yaml:/grammar

punctuator:
  __include: daagornt.lib.shared.yaml:/punctuator

key_binder:
  __include: daagornt.lib.shared.yaml:/key_binder

recognizer:
  __include: daagornt.lib.shared.yaml:/recognizer

menu:
  __include: daagornt.lib.shared.yaml:/menu

style:
  __include: daagornt.lib.shared.yaml:/zh_cn_simp/style?

editor:
  __include: daagornt.lib.shared.yaml:/editor

ascii_composer:
  __include: daagornt.lib.shared.yaml:/ascii_composer

zh_cn_simp:
  __include: daagornt.lib.dict-cmn-pan.yaml:/zh_cn_simp

zh_cn_trad:
  __include: daagornt.lib.dict-cmn-pan.yaml:/zh_cn_trad

zh_tw:
  __include: daagornt.lib.dict-cmn-pan.yaml:/zh_tw

zh_hk:
  __include: daagornt.lib.dict-cmn-pan.yaml:/zh_hk

rule_convert:
  layout:
    __append:
      # Hanyu Pinyin Flattening
      - 'xform ^<eh> <ei>'
      - 'xform <_h> <e>'
      - 'xform ^<_m> <m><u>'
      - 'xform <_m> <u><en>'
      - 'xform <_n> <en>'
      - 'xform <_ng> <eng>'
      - 'xform <ng> <n>'
      - 'xform <gn> <g>'
      - 'xform <v> <w>'
      - 'xform <i><ai> <i><a>'
      - 'xform <i><o> <o>'
      - 'xform <y><o> <u><o>'
      - 'xform <5> <0>'
      # Sibilant Compatibility
      - 'derive <ts><([iy])> <tsc><$1>'
      - 'derive <tsh><([iy])> <tsch><$1>'
      - 'derive <s><([iy])> <sc><$1>'
      - 'derive <k><([iy])> <tsc><$1>'
      - 'derive <kh><([iy])> <tsch><$1>'
      - 'derive <[xh]><([iy])> <sc><$1>'
      # Double pinyin key convert
      - 'xform ^<([ao])> $1<$1>'
      - 'xform ^<e> uu'
      - 'derive ^uu u<e>'
      - 'xform ^<ai> ai'
      - 'derive ^ai a<ai>'
      - 'xform ^<ei> ui'
      - 'derive ^ui u<ei>'
      - 'xform ^<au> ao'
      - 'derive ^ao a<au>'
      - 'xform ^<ou> ou'
      - 'derive ^ou o<ou>'
      - 'xform ^<an> an'
      - 'derive ^an a<an>'
      - 'xform ^<en> un'
      - 'derive ^un u<en>'
      - 'xform ^<ang> a<ang>'
      - 'xform ^<eng> u<eng>'
      - 'xform ^<er> ur'
      - 'derive ^ur u<er>'
      - 'xform <jy> <j><y>'
      - 'xform <i><a> k'
      - 'xform <u><a> f'
      - 'xform <u><ai> v'
      - 'xform <i><au> c'
      - 'xform <i><an> f'
      - 'xform <u><an> g'
      - 'xform <y><an> g'
      - 'xform <i><ang> m'
      - 'xform <u><ang> z'
      - 'xform <u><o> o'
      - 'xform <i><ou> t'
      - 'xform <i><ong> j'
      - 'xform <i><eh> p'
      - 'xform <y><eh> b'
      - 'xform <u><ei> d'
      - 'xform <i><en> d'
      - 'xform <u><en> y'
      - 'xform <y><en> y'
      - 'xform <i><eng> v'
      - 'xform <p> b'
      - 'xform <ph> p'
      - 'xform <m> m'
      - 'xform <f> f'
      - 'xform <t> d'
      - 'xform <th> t'
      - 'xform <n> n'
      - 'xform <l> l'
      - 'xform <k> g'
      - 'xform <kh> k'
      - 'xform (<x>|<h>) h'
      - 'xform <tsc> j'
      - 'xform <tsch> q'
      - 'xform <sc> x'
      - 'xform <tis> e'
      - 'xform <tish> i'
      - 'xform <is> v'
      - 'xform <zi> r'
      - 'xform <ts> z'
      - 'xform <tsh> c'
      - 'xform <s> s'
      - 'xform <j> y'
      - 'xform <i> i'
      - 'xform <w> w'
      - 'xform <u> u'
      - 'xform <y> x'
      - 'xform <a> a'
      - 'xform <o> o'
      - 'xform <e> e'
      - 'xform <eh> e'
      - 'xform <ai> k'
      - 'xform <ei> w'
      - 'xform <au> s'
      - 'xform <ou> r'
      - 'xform <an> j'
      - 'xform <en> m'
      - 'xform <ang> h'
      - 'xform <eng> n'
      - 'xform <ong> l'
      - 'xform <_[iw]> i'
      - 'xform <([1-4])> $1'
      - 'xform <0> 5'
      - 'abbrev ^(.+)[1-5]$ $1'
      - 'xlit 12345 7890-'
  preedit:
    __append:
      - 'xlit 7890- 12345'
